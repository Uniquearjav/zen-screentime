{% extends "base.html" %}

{% block title %}Dashboard - Screentime Tracker{% endblock %}

{% block content %}
<div class="card">
    <h2>ðŸ“ˆ Today's Overview</h2>
    
    <div class="stat-grid">
        <div class="stat-box">
            <h3>Total Screen Time</h3>
            <div class="value">{{ format_duration(today_total) }}</div>
        </div>
        <div class="stat-box">
            <h3>Applications Used</h3>
            <div class="value">{{ today_data|length }}</div>
        </div>
    </div>
    
    {% if today_data %}
    <h3>ðŸŽ¯ Top Applications Today</h3>
    <ul class="app-list">
        {% for item in today_data[:10] %}
        <li class="app-item">
            <div>
                <div class="app-name">{{ item.app_name }}</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ (item.duration / today_total * 100) if today_total > 0 else 0 }}%"></div>
                </div>
            </div>
            <div class="duration">{{ format_duration(item.duration) }}</div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <div class="empty-state">
        <p>ðŸ“­ No data recorded for today yet</p>
        <p style="font-size: 0.9em;">Start the tracker with: <code>./screentime.py start</code></p>
    </div>
    {% endif %}
</div>

{% if weekly_data %}
<div class="card">
    <h2>ðŸ“… Weekly Activity</h2>
    <ul class="app-list">
        {% for item in weekly_data %}
        <li class="app-item">
            <div class="app-name">{{ item.date.strftime('%A, %B %d') }}</div>
            <div class="duration">{{ format_duration(item.total_duration) }}</div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}
{% endblock %}
